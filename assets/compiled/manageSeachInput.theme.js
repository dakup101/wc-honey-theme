/*! For license information please see manageSeachInput.theme.js.LICENSE.txt */
"use strict";(self.webpackChunkhoney_theme=self.webpackChunkhoney_theme||[]).push([["manageSeachInput"],{"./assets/js/manageSeachInput.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ manageSeachInput)\n/* harmony export */ });\nfunction manageSeachInput(searchBtn) {\n    let searchInput = document.getElementById('searchInput');\n    let addCartPopup = document.querySelector('.added-to-cart-popup');\n    let overlay = document.querySelector('.page-overlay');\n    let searchResultsHtml = document.querySelector('.search-results');\n    searchBtn.addEventListener('click', e => {\n        console.log(searchBtn);\n        if (e.target == e.currentTarget) {\n            let btn = e.currentTarget;\n            searchBtn.classList.toggle('unfold');\n            overlay.classList.add('active');\n            searchInput.focus();\n        }\n    });\n    searchInput.addEventListener('input', e => {\n        if (e.currentTarget.value.length > 0) {\n            searchBtn.classList.add('show-results');\n            overlay.classList.add('active');\n        }\n        else {\n            searchBtn.classList.remove('show-results');\n            overlay.classList.remove('active');\n        }\n    });\n    searchInput.addEventListener('keyup', (e) => {\n        searchResultsHtml.innerHTML = '<div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>';\n        let data = e.currentTarget;\n        setTimeout(() => {\n            ajaxSearch(data.value);\n        }, 1000);\n    });\n    searchInput.addEventListener('focusout', () => {\n        searchBtn.classList.remove('show-results');\n        overlay.classList.remove('active');\n    });\n    //After WC Ajax add to cart\n    document.addEventListener('vanilla_added_to_cart', () => {\n        overlay.classList.add('active');\n        addCartPopup.classList.add('show');\n        document.querySelector('.add_to_cart_button').innerHTML = \"Kup jeszcze raz\";\n        let itemsInCart = parseInt(document.getElementById('inMyCart').innerHTML);\n        itemsInCart++;\n        document.getElementById('inMyCart').innerHTML = '' + itemsInCart;\n    });\n    // After WC Ajax adding to cart\n    document.addEventListener('vanilla_adding_to_cart', () => {\n        document.querySelector('.add_to_cart_button').innerHTML = \"Dodaję produkt...\";\n    });\n    //Overlay click\n    window.addEventListener('click', e => {\n        if (!searchBtn.contains(e.target)) {\n            searchBtn.classList.remove('unfold');\n            addCartPopup.classList.remove('show');\n            overlay.classList.remove('active');\n        }\n    });\n    // Continue shopping\n    document.querySelector('.continue-shopping').addEventListener('click', (e) => {\n        e.preventDefault();\n        overlay.click();\n    });\n    // Cart Button\n    // Ajax Search\n    function ajaxSearch(keyword) {\n        let url = \"http://localhost/honey/wp-admin/admin-ajax.php\";\n        const data = new FormData();\n        data.append('action', 'data_fetch');\n        data.append('search', keyword);\n        fetch(url, {\n            method: \"POST\",\n            credentials: 'same-origin',\n            body: data\n        })\n            .then((response) => response.text())\n            .then((data) => {\n            if (data) {\n                console.log(data);\n                ajaxSearchResults(JSON.parse(data), keyword);\n            }\n        })\n            .catch((error) => {\n            console.log(error);\n        });\n    }\n    function ajaxSearchResults(result, keyword) {\n        searchResultsHtml.innerHTML = '';\n        for (let item of result) {\n            let itemHtml = '' +\n                '<a href=\"' + item['Link'] + '\" class=\"search-results__item\">' +\n                '<div class=\"search-results__item--name\">' +\n                item['Title'] +\n                '</div>' +\n                '<div class=\"search-results__item--price\">' +\n                item['Price'] + 'zł' +\n                '</div>' +\n                '</a>';\n            searchResultsHtml.innerHTML += itemHtml;\n        }\n        searchResultsHtml.innerHTML += '<a class=\"other-results\" href=\"http://localhost/honey/sklep?s=' + keyword + '\">Inne Wyniki</a>';\n    }\n}\n\n\n//# sourceURL=webpack://honey-theme/./assets/js/manageSeachInput.ts?")}}]);